<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>캠페인 홈</title>
<link rel="stylesheet" href="/common/css/styles.css" th:href="@{/common/css/styles.css}" type="text/css">
<link rel="stylesheet" href="/common/css/styles.css" th:href="@{/common/css/campaignPart.css}" type="text/css">


<!-- Jquery 3.4.1 -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<!-- Alertyfy.js-->
<script src="//cdn.jsdelivr.net/npm/alertifyjs@1.11.4/build/alertify.min.js"></script> <!-- JavaScript -->
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.11.4/build/css/alertify.min.css"/> <!-- CSS -->
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.11.4/build/css/themes/default.min.css"/> <!-- default theme -->
</head>


<body>
	
	<div id="wrap" class="main">
		<div th:replace="/include/header.html :: header"></div>
		<div class="campaignTop">
		정렬
		<input type="radio" name="sort" id="recent" value="recent" checked> 최신순
		<input type="radio" name="sort" id="popluar" value="popular" > 인기순
		<input type="radio" name="sort" id="end_date" value="end_date"> 마감 임박순
	
		
		<th:block th:if="${session['advertisementvo'] != null}">
		<div style="float:right;">
		<button class="campaignBtn" name="campaignWriteBtn">캠페인 등록</button>
		<!-- <a th:href="insertCampaign">캠페인 등록</a> -->
		</div>
		
		</th:block>
		<th:block th:if="${session['uservo'] != null}">
		<div style="float:right;">
		<button class="campaignBtn" name="reviewWriteBtn">리뷰 등록</button>
		<!-- <a th:href="insertReview">리뷰 등록</a> -->
		</div>
		</th:block>
		</div>
		<div class="campaignAllList" id="sortedData" style="float: left; width: 100%; ">
			<table>
				<tr th:each="campaign:${campaignList}">
					<td><a th:href="@{getCampaign(campaignId=${campaign.campaignId})}" th:text="${campaign.title}"></a></td>
					<td th:text="${#dates.format(campaign.startDate, 'yyyy-MM-dd')}"></td>
					<td th:text="${#dates.format(campaign.endDate, 'yyyy-MM-dd')}"></td>
					<td th:text="${campaign.participants}"></td>
					<td th:text="${campaign.recruitment}"></td>
				</tr>
			</table>
		</div>
<!-- 	리스트 출력 파트
		<div >
			<table>
				<tr th:each="campaign:${campaignListWithImg}">
					<td th:text="${campaign[0]}"></td>
					<td th:text="${campaign[1]}"></td>
					<td th:text="${campaign[2]}"></td>
					<td th:text="${campaign[3]}"></td>
					<td th:text="${campaign[4]}"></td>
					<td th:text="${campaign[5]}"></td>
					<td th:text="${campaign[6]}"></td>
					<td th:text="${campaign[7]}"></td>
					<td th:text="${campaign[8]}"></td>
					<td><img th:src="${campaign[9]}"></td>
				</tr>
			</table>
		</div> -->
	<!-- 	
		<ul class="list-style03">
               <li th:each="campaign:${campaign}">
                  <span>
                     <a th:href="@{/getAdvertisementMyPage(advertisementName=${campaign[1]})}"><img th:src="${campaign[0]}" class="campaignWriterImg">&nbsp;&nbsp;&nbsp;<span th:text="${campaign[1]}" class="campaignWriterName"></span></a>
                     <span th:text="${#dates.format(campaign[2], 'yyyy-MM-dd')}" class="campaignDate"></span><span class="campaignDate">~</span>
                  </span>
                  <a th:href="@{/getCampaign(campaignId=${campaign[5]})}"><img th:src="${campaign[3]}" class="campaignimg"></a>
                  <span th:text="${campaign[4]}" class="campaignTitle"></span>
               </li>
            </ul> -->
		
</div>

	<script>
	$(document).ready(function(){
		$("input[name=sort]").click(function(){
			var sort = $(this).val();
			$.ajax({
				url : "/getListSortByRadio",
				data : {sort : sort },
				success : function(sortList){
					
					var str="";
					str +="<table><tr>"
					for(var i in sortList){					
				
					str +="<tr><td><a href='/getCampaign?campaignId="+sortList[i].campaignId+"'>" + sortList[i].title +"</a></td>"
					str +="<td>"+ sortList[i].startDate.substring(0,10) +"<td>"
					str +="<td>"+ sortList[i].endDate.substring(0,10) +"<td>"
					str +="<td>"+ sortList[i].participants +"<td>"
					str +="<td>"+ sortList[i].campaignId +"<td>"
					str +="<td>"+ sortList[i].recruitment +"<td></tr>"
					}
				
					str +="</table>";
					
					$("#sortedData table").remove;
					$("#sortedData").html(str);
					
					  if(sort == "recent"){
							var alertText = "최신순"
			            } else if (sort == "end_date"){
			                var alertText = "마감 임박순"
			            } else if (sort == "popular"){
			                var alertText = "인기순"
			            }
			            
			            alertify.set('notifier','position', 'bottom-right');
			            alertify.set('notifier','delay', 2);
			            alertify.success(alertText + ' 정렬이 완료되었습니다.');				
					
				}
			})
		});
	});
	</script>
	<script>
	$(document).ready(function(){
	    $("button[name=campaignWriteBtn]").click(function(){
	       location.href="/insertCampaign"
	    });
	    $("button[name=reviewWriteBtn]").click(function(){	        
	        location.href="insertReview"
	    });
	});
	</script>
	

</body>
</html>