<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.demo.dao.UserMapper">

	<select id="emailCheck" parameterType="String" resultType="int">
<![CDATA[
SELECT COUNT(*) 
		FROM uservo 
		WHERE userEmail = #{userEmail}
]]>
<<<<<<< HEAD
</select>

<!-- 회원가입 -->
<insert id="joinUser" parameterType="com.example.demo.domain.mypage.Uservo">
INSERT INTO uservo
			(
			user_email
			,nickname
			,password
			)
			VALUES
			(
			#{user_email}
			,#{nickname}
			,#{password}
			)

</insert>

<select id="nickCheck" parameterType="String" resultType="int">

SELECT COUNT(*) 
		FROM uservo 
=======
	</select>

	<!-- 회원가입 -->
	<insert id="joinUser"
		parameterType="com.example.demo.domain.mypage.Uservo">
		INSERT INTO uservo
		(
		userEmail
		,nickname
		,password
		)
		VALUES
		(
		#{userEmail}
		,#{nickname}
		,#{password}
		)

	</insert>

	<select id="nickCheck" parameterType="String" resultType="int">

		SELECT
		COUNT(*)
		FROM uservo
>>>>>>> 진광
		WHERE nickname=#{nickname}

	</select>

	<!-- 회원 인증키(난수) 생성 -->
	<update id="GetKey" parameterType="Map">
		UPDATE uservo
		SET userKey = #{param2}
		WHERE userEmail = #{param1}
	</update>

	<!-- 회원 인증키(난수) Y로 변경 -->
	<update id="alter_userKey" parameterType="Map">
		UPDATE uservo
		SET userKey = 'Y'
		WHERE userEmail = #{param1} and userKey = #{param2}
	</update>

	<select id="loginUser"
		resultType="com.example.demo.domain.mypage.Uservo">
		SELECT *
		FROM uservo
		WHERE userEmail =#{param1} and password= #{param2}
	</select>


</mapper>





















<!-- <select id="emailCheck2" parameterType="String" resultType="com.example.demo.domain.mypage.Uservo"> 
	SELECT * FROM Uservo WHERE userEmail=#{userEmail} </select> -->
